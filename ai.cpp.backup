#include "AI.h"

// 玩家AI和敌方AI
QString AI::AIName[NOWPLAYER] = { "UsrAI", "EnemyAI" };

// - SN: 人类单位的序列号
// - DR0, UR0: 目标位置的坐标
int AI::HumanMove(int SN, double DR0, double UR0){
    // 检查序列号是否属于人类
    if(!isHuman(SN))
        return ACTION_INVALID_SN;  // 无效序列号
    
    // 检查目标是否在地图边界内
    if(DR0 > 2575 || DR0 < 0||UR0 > 2575 || UR0 < 0)
        return ACTION_INVALID_LOCATION;  // 返回无效位置
    
    // 创建移动指令
    return AddToIns(instruction(1,SN,DR0,UR0));
}


// - SN: 执行动作的单位序列号
// - obSN: 动作目标对象的序列号

int AI::HumanAction(int SN,int obSN){
    // 检查执行者是否为人类或建筑
    if(!(isHuman(SN)||isBuilding(SN)) )
        return ACTION_INVALID_SN;  // 返回无效序列号
    
    // 创建动作指令
    return AddToIns(instruction(2,SN,obSN , true));
}

// - SN: 建造者的序列号
// - BuildingNum: 要建造的类型
// - BlockDR, BlockUR: 建造位置的地图块坐标
int AI::HumanBuild(int SN, int BuildingNum, int BlockDR, int BlockUR){
    // 检查建造者是否为人类
    if(!isHuman(SN)){
        return ACTION_INVALID_SN;  // 无效序列号
    }
    
    // 创建建造指令
    return AddToIns(instruction(3,SN,BlockDR,BlockUR,BuildingNum));
}

// - SN: 建筑的序列号
// - Action: 建筑要执行的动作类型
int AI::BuildingAction(int SN,int Action){
    // 检查序列号是否属于建筑
    if(!isBuilding(SN)){
        return ACTION_INVALID_SN;  // 无效序列号
    }
    
    // 创建建筑动作指令
    return AddToIns(instruction(4,SN,Action));
}
//void AI::printInsRet(int id){
//    instruction tmp=getInsRet(id);
//    if(!tmp.isExist()){
//        qDebug()<<"ins:"<<id<<" Not Found!";
//        return;
//    }
//    if(tmp.type==1){
//        qDebug()<<"ins:"<<id
//               <<"\n   HumanMove("<<tmp.SN<<","<<tmp.DR<<","<<tmp.UR
//              <<")\n   return "<<tmp.ret;
//    }else if(tmp.type==2){
//        qDebug()<<"ins:"<<id
//               <<"\n   HumanAct("<<tmp.SN<<","<<tmp.obSN
//              <<")\n   return "<<tmp.ret;
//    }else if(tmp.type==3){
//        qDebug()<<"ins:"<<id
//               <<"\n   HumanBuild("<<tmp.SN<<","<<tmp.BlockDR<<","<<tmp.BlockUR<<","<<tmp.option
//              <<")\n   return "<<tmp.ret;
//    }else if(tmp.type==4){
//        qDebug()<<"ins:"<<id
//               <<"\n   BuildingAct("<<tmp.SN<<","<<tmp.option
//              <<")\n   return "<<tmp.ret;
//    }
//}


