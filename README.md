# 基于《帝国时代1》的即时战略游戏AI设计与实现

## 🕹 项目简介

本项目为模拟即时战略游戏《帝国时代1》的 Qt 实现，复刻了石器时代和工具时代的核心内容，包括资源采集、建筑建造、科技升级、部队训练和防御敌人等玩法。

玩家需要实现“在 25 分钟内击败敌人并保护己方市镇中心”的目标。


<img width="429" alt="image" src="https://github.com/user-attachments/assets/79daae05-e58a-46a3-9a13-cb8c9b780902" />

---

## 🎯 核心目标

- 我使用 Qt 框架构建完整的 RTS 游戏系统
- 实现资源采集、建筑建造、科技升级、士兵训练、防御敌人等核心逻辑
 <img width="412" alt="image" src="https://github.com/user-attachments/assets/bbf2a8fa-0dd1-4edc-a11c-c16a1b7a2a79" />

- 通过程序接口与 AI 控制游戏流程
- 设定固定游戏时长和失败/胜利条件，实现动态计分机制

---

## 🛠 开发环境与依赖

- **开发工具**：Qt Creator + GCC/MSVC（C++17）
- **调试工具**：Qt 内置调试器 + DebugText 调试框
- **依赖库**：
  - Qt 核心模块（GUI、多线程、容器等）
  - STL 容器（`vector`, `map` 等）

---

## 📁 项目结构与阶段（详细代码在项目里，代码讲解可以看程序报告或者视频~）

### 阶段 1：资源采集与初始建设
- `Farmer.cpp/h`: 农民类，支持采集、移动、建造等功能
- `Resource.cpp/h`: 资源基类
- `Building_Resource.cpp/h`: 资源建筑类
- `StaticRes.cpp/h`: 静态资源（浆果、树、石头）

### 阶段 2：建造建筑与训练单位
- `Building.cpp/h`: 建筑基类
- `Animal.cpp/h`: 动物类，作为食物来源
- `Army.cpp/h`: 各类士兵单位类

### 阶段 3：防御系统与战斗实现
- `Missile.cpp/h`: 投射物
- `Bloodhaver.cpp/h`: 拥有血量的战斗单位基类
- `Core.cpp/h`: 战斗主逻辑

### 阶段 4：农田与市场建设
- `Building_Resource.cpp/h`: 农田/市场逻辑
- `Development.cpp/h`: 科技系统
- `UsrAI.cpp/h`, `EnemyAI.cpp/h`: 玩家与敌人 AI 控制

### 阶段 5：总攻与敌方英雄击杀
- `Player.cpp/h`: 管理资源与建筑权限
- `Core_CondiFunc.cpp/h`: 胜负判断逻辑

---

## 🗺 游戏内容

- 地图尺寸：72x72 格子，采用伪 3D 视角（等轴投影）
- <img width="407" alt="image" src="https://github.com/user-attachments/assets/e0e97ed6-dc16-4ebd-b065-7520b421a1e6" />

- 单位与建筑具有视野系统
- 采集资源包括：木材、食物、石头
  
| 资源名称   | 资源类型 | 资源量   | 生成规则                       | 备注                            |
|------------|----------|----------|--------------------------------|---------------------------------|
| 树木/森林  | 木头     | 75/棵    | 随机生成零散的树木和两片大树林 |                                 |
| 石堆       | 石头     | 250/块   | 随机生成两大堆石堆             |                                 |
| 浆果丛     | 食物     | 150/丛   | 随机生成一堆、每堆6丛          |                                 |
| 瞪羚尸体   | 食物     | 150/只   | 随机生成一群、每群6只          | 死后才可收集                   |
| 大象尸体   | 食物     | 300/只   | 随机生成一群、每群2只          | 死后才可收集                   |
| 农场       | 食物     | 250/个   | 玩家自行建造                   | 市场科技可以升级农场资源量     |


- 资源和单位图示：
<img width="416" alt="image" src="https://github.com/user-attachments/assets/d5d48762-c669-4f16-b53b-57dd82c91cbc" />


- 建筑种类包括：市镇中心、谷仓、仓库、房屋、兵营、靶场、箭塔、市场、农场等
  
| 建筑名称 | 建造时代 | 建筑大小 | 建造花费 | 建造时间 | 可执行的行动 | 备注 |
|----------|----------|----------|----------|----------|----------------|------|
| 市镇中心 | 开局拥有 | 3x3      | -        | -        | 生产村民、升级时代 | 可以存放资源<br>容纳4人口 |
| 房屋     | 石器时代 | 2x2      | 30木头   | 20s      | -              | 容纳4人口 |
| 谷仓     | 石器时代 | 3x3      | 120木头  | 30s      | 研究箭塔建造       | 用来存放资源 |
| 仓库     | 石器时代 | 3x3      | 120木头  | 30s      | 研究攻防技术       | 用来存放资源 |
| 兵营     | 石器时代 | 3x3      | 125木头  | 30s      | 训练士兵、升级战斧 | - |
| 箭塔     | 工具时代 | 2x2      | 150石头  | 80s      | 攻击敌军或建筑     | 需在谷仓解锁科技 |
| 农场     | 工具时代 | 3x3      | 75木头   | 30s      | -              | 需要先建造市场 |
| 市场     | 工具时代 | 3x3      | 150木头  | 40s      | 升级资源采集技术、农场 | 需要先建造谷仓 |
| 靶场     | 工具时代 | 3x3      | 150木头  | 40s      | 训练弓手         | 需要先建造兵营 |
| 马厩     | 工具时代 | 3x3      | 150木头  | 40s      | 训练骑兵         | 需要先建造兵营 |

- 单位种类包括：村民、棍棒兵、战斧兵、弓箭手、投石兵、骑兵、敌方英雄等
  
| 单位名称   | 血量 | 攻击类型      | 攻击距离 | 攻击力  | 近战防御 | 远程防御 | 建造时间 | 备注                   |
|------------|------|---------------|----------|---------|-----------|-----------|-----------|------------------------|
| 瞪羚       | 8    | -             | -        | -       | -         | -         | -         | 死后变为资源          |
| 大象       | 45   | 近战          | 10       | -       | -         | -         | -         | 死后变为资源          |
| 村民       | 25   | 远程4/近战    | 4        | -       | -         | -         | 20s       |                        |
| 棍棒兵     | 40   | 近战          | 3（5）   | 0（2）  | 0         | -         | 26s       | 括号为升级后          |
| 战斧兵     | 50   | 近战          | 5（7）   | 0（2）  | 0         | -         | 26s       |                        |
| 弓箭手     | 35   | 远程          | 5        | 3       | 0（2）    | 0         | 30s       |                        |
| 投石兵     | 25   | 远程          | 4        | 2       | 0         | 2         | 24s       |                        |
| 侦察骑兵   | 60   | 近战          | 3        | 0（2）  | 0         | -         | 30s       |                        |
| 短剑手     | 120  | 近战          | 10       | 2       | 2         | -         | -         | 敌方英雄，对建筑攻击翻倍 |
| 强弓手     | 80   | 远程          | 7        | 6       | 2         | 2         | -         | 敌方英雄，对建筑攻击翻倍 |
| 骑兵       | 150  | 近战          | 6        | 2       | 2         | -         | -         | 敌方英雄，对建筑攻击翻倍 |

---

## 🎮 游戏玩法与目标

- **胜利条件**：在 25 分钟内击败敌方所有单位
- **失败条件**：市镇中心被摧毁或时间耗尽
- **记分规则**：
  - 收集资源、建造建筑、击杀敌人均可获得积分
  - 游戏运行时动态显示分数

---

## 🔧 操作说明

- **左键**：选中单位/建筑，执行快捷操作
- **右键**：移动/攻击/采集指令
- **调试信息**：在界面右侧以彩色文本实时显示 AI 状态和关键事件
- **界面功能**：可调倍速、暂停、导出调试日志

---

## 📹 项目演示视频

该项目讲解视频在 B 站，标题：

> 【【南开大学25C++】爆肝500小时!现在全村都知道我欠程序员工资了!-哔哩哔哩】 https://b23.tv/iqte4nV

---



## 🔗 项目地址

👉 [GitHub 项目地址](https://github.com/XintongLiu-svg/newAoE)

---

感谢阅读本项目，欢迎留言交流或提出建议！
